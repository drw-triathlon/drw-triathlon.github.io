<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link href="base.css" rel="stylesheet" />
<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.3/mapbox.css' rel='stylesheet' />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <div id='map'>
  </div>
  <div id='selections' class="selections">
    <b><div id='map_url'></div></b><br>
  
    <a href='#' class="show">Combatants:</a>
    <div class='content'>
      <a href='#' class="hide">Hide</a>
      <div id="toggles">
      </div>
    </div>
  </div>
  <div id='loading'>
  </div>
  <div id='selected'>
    <h1><a href=https://www.strava.com/clubs/202883 target=_blank>Warlords of MTL</a></h1>
  </div>
  <div id='links'>
    <a href="distance_plot_2019.html" target="_blank">DIstance</a><br>
    <a href="elevation_gain_plot_2019.html" target="_blank">Elevation Gain</a><br>
    <a href="segment_count_snapshot_plot.html" target="_blank">Segment Count Snapshot</a><br>
    <a href="segment_count_snapshot_this_year_plot.html" target="_blank">Segment Count Snapshot<b>(This Year)</b></a><br>
    <a href='#' class="show">Other Links</a>
    <p class='content'>
	  <a href="segments_over_time_plot.html" target="_blank">Segment Count Over Time</a><br>
	  <a href="segments_over_time_this_year_plot.html" target="_blank">Segment Count (this_year)</b></a><br>
	  <a href="stacked_plot.html" target="_blank">Stacked Count</a><br>
      <a href="prev_years/distance2015.html" target="_blank">Distance 2015</a><br>
      <a href="prev_years/distance2016.html" target="_blank">Distance 2016</a><br>
      <a href="prev_years/distance2017.html" target="_blank">Distance 2017</a><br>
      <a href="distance_plot_2018.html" target="_blank">Distance 2018</a><br>
    <a href="elevation_gain_plot_2018.html" target="_blank">Elevation Gain 2018</a><br>
      <a href='#' class="hide">Hide</a>
    </div>
  </div>
  <div id='about'>
    <a href='#' class="show">About</a>
    <p class='content'>
      MTL Strava Segment Control Map. Adapted by Josh Felker from <a href="http://chriszetter.com">Chris Zetter's</a> <a href="http://chriszetter.com/blog/2014/06/14/visualising-supermarkets-with-a-voronoi-diagram/">Visualising Supermarkets with a Voronoi Diagram</a>, powered by data from <a href="http://www.superlocate.net/">SuperLocate</a>, maps copyright
      <a href='https://www.mapbox.com/about/maps/' target='_blank'>Mapbox and OpenStreetMap</a>.
      <a href='#' class="hide">Hide</a>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.8/d3.min.js"></script>
  <script src="https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.js"></script>
  <script src="lib/voronoi_map.js"></script>
  <script>
    //need this variable in the voronoi function
    var box = [[45.719182 , -74.023017], [45.380184 ,  -73.436622]];
	L.mapbox.accessToken = 'pk.eyJ1IjoiemV0dGVyIiwiYSI6ImVvQ3FGVlEifQ.jGp_PWb6xineYqezpSd7wA';
    map = L.mapbox.map('map', 'zetter.i73ka9hn')
      .fitBounds(box);
    var sPageURL = window.location.search.substring(1);
    if (sPageURL == 'thisyear' || sPageURL == 'this_year') {
        document.getElementById("map_url").innerHTML = "<a href='/'>Show All The Time</a>";
        url = './segoutput_this_year.csv';
    } else {
        document.getElementById("map_url").innerHTML = "<a href='?thisyear'>Show This Year Only</a>";
        url = './segoutput.csv';
    }

    //initialSelection = d3.set(['UNCLAIMED','Josh Felker', 'Arvind Ramanathan','Mario Born','Marc Devlin','Yibing Wen','Frank Oduro','Avalon Powell','Sasha Wloski','Mathieu GagnÃ©','Eoin Craigie','Vitor Lima','Vincent Trudel-Lapierre','Leila H','Henry Jenkins ðŸš€','Mo Baakoe','Diwakar R','Tengfei Han','Antoine Duplantie-Grenier','Michael Burkat','Sandeep Bharadwaj','Cameron Mackey']);
    voronoiMap(map, url, undefined);
  </script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68924925-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
</html>
